# WiSafe Android App 빌드 및 실행 가이드

## 사전 준비

1. **Android Studio 설치**
   - Android Studio Hedgehog (2023.1.1) 이상 버전 설치
   - Android SDK 23 이상 설치

2. **Flask 서버 실행**
   - 프로젝트 루트에서 Flask 서버 실행:
     ```bash
     python app.py
     ```
   - 서버가 `http://localhost:5000`에서 실행되어야 합니다.

## 프로젝트 설정

### 1. Android Studio에서 프로젝트 열기

1. Android Studio 실행
2. "Open an Existing Project" 선택
3. `android` 폴더 선택

### 2. 서버 URL 설정

`android/app/src/main/java/com/wisafe/app/MainActivity.java` 파일을 열고 서버 URL을 설정합니다:

**에뮬레이터용:**
```java
String serverUrl = "http://10.0.2.2:5000/user";
```

**실제 기기용 (같은 네트워크):**
```java
String serverUrl = "http://YOUR_SERVER_IP:5000/user";
```
- `YOUR_SERVER_IP`를 실제 서버 IP 주소로 변경
- PC와 안드로이드 기기가 같은 Wi-Fi 네트워크에 연결되어 있어야 합니다.

### 3. Gradle 동기화

1. Android Studio에서 "File" > "Sync Project with Gradle Files" 선택
2. 또는 상단의 "Sync Now" 버튼 클릭

## 빌드 및 실행

### 에뮬레이터에서 실행

1. Android Studio에서 "Run" > "Run 'app'" 선택
2. 에뮬레이터 선택 또는 새로 생성
3. 앱이 설치되고 실행됩니다.

### 실제 기기에서 실행

1. 안드로이드 기기에서 "개발자 옵션" 활성화
2. "USB 디버깅" 활성화
3. USB 케이블로 PC에 연결
4. Android Studio에서 기기 선택
5. "Run" > "Run 'app'" 선택

## 권한 요청

앱 실행 시 다음 권한이 요청됩니다:
- **위치 권한** (필수) - WiFi 스캔을 위해 필요
- **WiFi 상태 접근 권한** - WiFi 스캔을 위해 필요

모든 권한을 허용해야 WiFi 스캔 기능이 정상적으로 작동합니다.

## 문제 해결

### 1. 웹 페이지가 로드되지 않는 경우

- Flask 서버가 실행 중인지 확인
- 서버 URL이 올바른지 확인
- 네트워크 연결 상태 확인
- 실제 기기 사용 시: PC와 기기가 같은 Wi-Fi 네트워크에 연결되어 있는지 확인

### 2. WiFi 스캔이 작동하지 않는 경우

- 위치 권한이 허용되었는지 확인
- WiFi가 활성화되어 있는지 확인
- Android 10 이상에서는 위치 서비스가 켜져 있어야 합니다.

### 3. 빌드 오류가 발생하는 경우

- Gradle 동기화 다시 시도
- "File" > "Invalidate Caches / Restart" 선택
- Android SDK 업데이트 확인

## 주의사항

- Android 6.0 이상에서는 위치 권한이 필수입니다.
- 실제 기기에서 테스트할 때는 Flask 서버가 실행 중이어야 합니다.
- 에뮬레이터에서는 `10.0.2.2`를 사용하여 호스트 머신의 로컬 서버에 접근할 수 있습니다.
